<Shapes
    xmlns="http://www.evolus.vn/Namespace/Pencil"
    xmlns:p="http://www.evolus.vn/Namespace/Pencil"
    xmlns:svg="http://www.w3.org/2000/svg"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    id="Evolus.BasicWebElements"
    displayName="Basic Web Elements"
    description="Collection of basic items that are regularly used in web designs. Please note that this collection contains platform-related UI elements."
    author="Duong Thanh An"
    url="http://">
    <Properties>
        <PropertyGroup name="Commons">
            <Property name="defaultTextFont" type="Font" displayName="Default Font">'Liberation Sans'|normal|normal|12px</Property>
            <Property name="defaultTextColor" type="Color" displayName="Default Text Color">#000000ff</Property>
            <Property name="defaultLinkColor" type="Color" displayName="Default Link Color">#0000ffff</Property>
        </PropertyGroup>
        <PropertyGroup name="Table: header">
            <Property name="defaultHeaderTextColor" type="Color" displayName="Default Header Text Color">#000000ff</Property>
            <Property name="defaultHeaderBGColor" type="Color" displayName="Default Header Background Color">#ccccccff</Property>
        </PropertyGroup>
        <PropertyGroup name="Table: border">
            <Property name="defaultTableBorderColor" type="Color" displayName="Default Border Color">#00000055</Property>
            <Property name="defaultTableBorderStyle" type="StrokeStyle" displayName="Default Border Style">1|</Property>
        </PropertyGroup>
    </Properties>

    <Script>
        collection.foo = function () {
            return 123;
        };
        collection.generateBreadCrumbHTML = function (plainText) {
            var html = "ul";
        };
    </Script>

    <Shape id="pane" displayName="Pane" icon="Icons/accept.png">
        <Properties>
            <PropertyGroup>
                <Property name="box" type="Dimension">200,300</Property>
                <Property name="cornerStyle" displayName="Corner Style" type="Enum" p:enumValues="['none|None', 'all|All rounded', 'top|Rounded top corners', 'bottom|Rounded bottom corners', 'left|Rounded left corners', 'right|Rounded right corners']">none</Property>
            </PropertyGroup>

            <PropertyGroup name="Handles">
                <Property name="radius" displayName="Corner Radius" type="Handle" p:lockY="true" p:minX="0" p:maxX="$box.w / 2" p:disabled="$cornerStyle.value == 'none'">10,0</Property>
                <Property name="textPadding" displayName="Text Padding" type="Handle" p:lockX="true" p:minY="0" p:maxY="$box.w / 2">0,10</Property>
            </PropertyGroup>

            <PropertyGroup name="Background">
                <Property name="fillColor" displayName="Background Color" type="Color">#eeeeeeff</Property>
            </PropertyGroup>
            <PropertyGroup name="Shadow">
                <Property name="shadowStyle" displayName="Style" type="ShadowStyle">0|0|3</Property>
                <Property name="shadowColor" displayName="Color" type="Color">#00000000</Property>
            </PropertyGroup>
            <PropertyGroup name="Border">
                <Property name="strokeColor" displayName="Border Color" type="Color">#000000ff</Property>
                <Property name="strokeStyle" displayName="Border Style" type="StrokeStyle">0|</Property>
            </PropertyGroup>
            <PropertyGroup name="Text">
                <Property name="textContent" displayName="Text Content" type="RichText"><![CDATA[]]></Property>
                <Property name="textFont" displayName="Default Font" type="Font"><E>$$defaultTextFont</E></Property>
                <Property name="textColor" displayName="Text Color" type="Color"><E>$$defaultTextColor</E></Property>
                <Property name="textAlign" displayName="Text Alignment" type="Alignment">1,1</Property>
            </PropertyGroup>
        </Properties>
        <Behaviors>
            <For ref="htmlObject">
                <TextContent>
                    <Arg>$textContent</Arg>
                    <Arg>false</Arg>
                    <Arg>true</Arg>
                </TextContent>
                <Font>$textFont</Font>
                <Fill>$textColor</Fill>
                <Color>$textColor</Color>
                <Bound>Bound.fromBox($box, -20)</Bound>
            </For>
            <For ref="div">
                <CustomStyle>
                    <Arg>"-moz-box-shadow"</Arg>
                    <Arg>$shadowColor.a > 0 ? $shadowStyle.toCSSString($shadowColor) : "none"</Arg>
                </CustomStyle>
                <CustomStyle>
                    <Arg>"width"</Arg>
                    <Arg>$box.w + "px"</Arg>
                </CustomStyle>
                <CustomStyle>
                    <Arg>"height"</Arg>
                    <Arg>$box.h + "px"</Arg>
                </CustomStyle>
                <CustomStyle>
                    <Arg>"padding"</Arg>
                    <Arg>$textPadding.y + "px"</Arg>
                </CustomStyle>
                <CustomStyle>
                    <Arg>"background-color"</Arg>
                    <Arg>$fillColor.toRGBAString()</Arg>
                </CustomStyle>
                <CustomStyle>
                    <Arg>"-moz-border-radius-topleft"</Arg>
                    <Arg>($cornerStyle.value == "all" || $cornerStyle.value == "top" || $cornerStyle.value == "left") ? ($radius.x + "px") : "0px"</Arg>
                </CustomStyle>
                <CustomStyle>
                    <Arg>"-moz-border-radius-topright"</Arg>
                    <Arg>($cornerStyle.value == "all" || $cornerStyle.value == "top" || $cornerStyle.value == "right") ? ($radius.x + "px") : "0px"</Arg>
                </CustomStyle>
                <CustomStyle>
                    <Arg>"-moz-border-radius-bottomleft"</Arg>
                    <Arg>($cornerStyle.value == "all" || $cornerStyle.value == "bottom" || $cornerStyle.value == "left") ? ($radius.x + "px") : "0px"</Arg>
                </CustomStyle>
                <CustomStyle>
                    <Arg>"-moz-border-radius-bottomright"</Arg>
                    <Arg>($cornerStyle.value == "all" || $cornerStyle.value == "bottom" || $cornerStyle.value == "right") ? ($radius.x + "px") : "0px"</Arg>
                </CustomStyle>
                <CustomStyle>
                    <Arg>"border"</Arg>
                    <Arg>$strokeStyle.w > 0 ? ("solid " + $strokeStyle.w + "px " + $strokeColor.toRGBAString()) : "none"</Arg>
                </CustomStyle>
            </For>
        </Behaviors>
        <Actions>
            <Action id="generateLoremShortRichTextBox" displayName="Generate Short Random Texts">
                <Impl>
                        <![CDATA[
                            this.setProperty("textContent", RichText.fromLoremIpsum(10));
                        ]]>
                </Impl>
            </Action>
            <Action id="generateLoremLongRichTextBox" displayName="Generate Long Random Texts">
                <Impl>
                        <![CDATA[
                            this.setProperty("textContent", RichText.fromLoremIpsum(45));
                        ]]>
                </Impl>
            </Action>
            <Action id="generateLoremExtraLongRichTextBox" displayName="Generate Longer Random Texts">
                <Impl>
                        <![CDATA[
                            this.setProperty("textContent", RichText.fromLoremIpsum(100));
                        ]]>
                </Impl>
            </Action>
        </Actions>
        <p:Content xmlns:p="http://www.evolus.vn/Namespace/Pencil" xmlns="http://www.w3.org/2000/svg">
            <foreignObject x="0" y="0" width="200" height="150" id="htmlObject">
                <div xmlns="http://www.w3.org/1999/xhtml" id="div" style="margin-left: 20px; margin-top: 20px; -moz-box-sizing: border-box; overflow: hidden;">
                    Rich <strong>text</strong> pane contains <a href="#">hyper text</a>
                </div>
            </foreignObject>
        </p:Content>
    </Shape>
    <Shape id="combo" displayName="Combo" icon="Icons/accept.png">
        <Properties>
            <PropertyGroup>
                <Property name="box" type="Dimension">200,25</Property>
                <Property name="disabled" type="Bool" displayName="Disabled">false</Property>
            </PropertyGroup>
            <PropertyGroup name="Text">
                <Property name="text" displayName="Caption" type="PlainText">Select</Property>
                <Property name="textColor" displayName="Color" type="Color"><E>$$defaultTextColor</E></Property>
                <Property name="textFont" displayName="Font" type="Font" p:disabled="$useSystemFontStyle"><E>$$defaultTextFont</E></Property>
            </PropertyGroup>
        </Properties>
        <Behaviors>
            <For ref="select">
                <Attr>
                    <Arg>"disabled"</Arg>
                    <Arg>$disabled.value ? "true" : null</Arg>
                </Attr>
            </For>
            <For ref="htmlObject">
                <Box>$box</Box>
            </For>
            <For ref="text">
                <TextContent>$text</TextContent>
                <Fill>$disabled.value ? $textColor.hollowed(0.5) : $textColor</Fill>
                <Font>$textFont</Font>
                <BoxFit>
                    <Arg>new Bound(8, 0, $box.w - 30, $box.h)</Arg>
                    <Arg>new Alignment(0, 1)</Arg>
                </BoxFit>
            </For>
        </Behaviors>
        <p:Content xmlns:p="http://www.evolus.vn/Namespace/Pencil" xmlns="http://www.w3.org/2000/svg">
            <foreignObject x="0" y="0" width="200" height="150" id="htmlObject">
                <div xmlns="http://www.w3.org/1999/xhtml" style="width: 100%; height: 100%; position: relative;">
                    <select id="select" style="width: 100%; height: 100%; -moz-user-focus: ignore; vertical-align: middle;"></select>
                    <div style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%;"/>
                </div>
            </foreignObject>
            <text id="text" xml:space="preserve"></text>
        </p:Content>
    </Shape>
    <Shape id="button" displayName="Button" icon="Icons/accept.png">
        <Properties>
            <PropertyGroup>
                <Property name="box" type="Dimension">80,25</Property>
                <Property name="disabled" type="Bool" displayName="Disabled">false</Property>
            </PropertyGroup>
            <PropertyGroup name="Text">
                <Property name="text" displayName="Caption" type="PlainText">Select</Property>
                <Property name="textColor" displayName="Color" type="Color"><E>$$defaultTextColor</E></Property>
                <Property name="textFont" displayName="Font" type="Font" p:disabled="$useSystemFontStyle"><E>$$defaultTextFont</E></Property>
            </PropertyGroup>
        </Properties>
        <Behaviors>
            <For ref="button">
                <Attr>
                    <Arg>"disabled"</Arg>
                    <Arg>$disabled.value ? "true" : null</Arg>
                </Attr>
            </For>
            <For ref="htmlObject">
                <Box>$box</Box>
            </For>
            <For ref="text">
                <TextContent>$text</TextContent>
                <Fill>$disabled.value ? $textColor.hollowed(0.5) : $textColor</Fill>
                <Font>$textFont</Font>
                <CustomStyle>
                    <Arg>"font"</Arg>
                    <Arg>$textFont</Arg>
                </CustomStyle>
                <BoxFit>
                    <Arg>Bound.fromBox($box, 5)</Arg>
                    <Arg>new Alignment(1, 1)</Arg>
                </BoxFit>
            </For>
        </Behaviors>
        <p:Content xmlns:p="http://www.evolus.vn/Namespace/Pencil" xmlns="http://www.w3.org/2000/svg">
            <foreignObject x="0" y="0" width="200" height="150" id="htmlObject">
                <div xmlns="http://www.w3.org/1999/xhtml" style="width: 100%; height: 100%; position: relative;">
                    <input type="button" id="button" style="width: 100%; height: 100%; -moz-user-focus: ignore; vertical-align: middle; margin: 0px !important;" />
                    <div style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%;"/>
                </div>
            </foreignObject>
            <text id="text" xml:space="preserve"></text>
        </p:Content>
    </Shape>
    <Shape id="textbox" displayName="Text Box" icon="Icons/accept.png">
        <Properties>
            <PropertyGroup>
                <Property name="box" type="Dimension">200,25</Property>
                <Property name="disabled" type="Bool" displayName="Disabled">false</Property>
            </PropertyGroup>
            <PropertyGroup name="Text">
                <Property name="text" displayName="Caption" type="PlainText">Select</Property>
                <Property name="textColor" displayName="Color" type="Color"><E>$$defaultTextColor</E></Property>
                <Property name="textFont" displayName="Font" type="Font" p:disabled="$useSystemFontStyle"><E>$$defaultTextFont</E></Property>
                <Property name="textAlign" displayName="Text Alignment" type="Alignment">0,1</Property>
            </PropertyGroup>
        </Properties>
        <Behaviors>
            <For ref="textbox">
                <Attr>
                    <Arg>"disabled"</Arg>
                    <Arg>$disabled.value ? "true" : null</Arg>
                </Attr>
            </For>
            <For ref="htmlObject">
                <Box>$box</Box>
            </For>
            <For ref="text">
                <TextContent>$text</TextContent>
                <Fill>$disabled.value ? $textColor.hollowed(0.5) : $textColor</Fill>
                <Font>$textFont</Font>
                <CustomStyle>
                    <Arg>"font"</Arg>
                    <Arg>$textFont</Arg>
                </CustomStyle>
                <BoxFit>
                    <Arg>Bound.fromBox($box, 5)</Arg>
                    <Arg>$textAlign</Arg>
                </BoxFit>
            </For>
        </Behaviors>
        <p:Content xmlns:p="http://www.evolus.vn/Namespace/Pencil" xmlns="http://www.w3.org/2000/svg">
            <foreignObject x="0" y="0" width="200" height="150" id="htmlObject">
                <div xmlns="http://www.w3.org/1999/xhtml" style="width: 100%; height: 100%; position: relative;">
                    <input type="text" id="textbox" style="width: 100%; height: 100%; -moz-user-focus: ignore; vertical-align: middle; -moz-box-sizing: border-box;" />
                    <div style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%;"/>
                </div>
            </foreignObject>
            <text id="text" xml:space="preserve"></text>
        </p:Content>
    </Shape>
    <Shape id="textArea" displayName="Text Area" icon="Icons/accept.png">
        <Properties>
            <PropertyGroup>
                <Property name="box" type="Dimension">300,200</Property>
                <Property name="padding" type="Handle" p:lockX="true" p:maxY="100" p:minY="5">0,5</Property>
                <Property name="disabled" type="Bool" displayName="Disabled">false</Property>
            </PropertyGroup>
            <PropertyGroup name="Text">
                <Property name="text" displayName="Text Content" type="RichText"
                    p:editInfo="var size = F.elementSize('textArea'); ({targetName: 'htmlObject', bound: new Bound(5, 5, size.w - 10, size.h -10), font: $textFont, align: $textAlign})"
                ></Property>
                <Property name="textColor" displayName="Color" type="Color"><E>$$defaultTextColor</E></Property>
                <Property name="textFont" displayName="Font" type="Font" p:disabled="$useSystemFontStyle"><E>$$defaultTextFont</E></Property>
                <Property name="textAlign" displayName="Text Alignment" type="Alignment">0,1</Property>
            </PropertyGroup>
        </Properties>
        <Behaviors>
            <For ref="textArea">
                <Attr>
                    <Arg>"disabled"</Arg>
                    <Arg>$disabled.value ? "true" : null</Arg>
                </Attr>
            </For>
            <For ref="htmlObject">
                <Box>
                    <Arg>$box</Arg>
                </Box>
            </For>
            <For ref="content">
                <TextContent>$text</TextContent>
                <Font>$textFont</Font>
                <Color>$textColor</Color>
                <CustomStyle>
                    <Arg>"text-align"</Arg>
                    <Arg>["left", "center", "right"][$textAlign.h]</Arg>
                </CustomStyle>
                <CustomStyle>
                    <Arg>"vertical-align"</Arg>
                    <Arg>["top", "middle", "bottom"][$textAlign.v]</Arg>
                </CustomStyle>
                <CustomStyle>
                    <Arg>"text-decoration"</Arg>
                    <Arg>$textFont.decor</Arg>
                </CustomStyle>
                <CustomStyle>
                    <Arg>"top"</Arg>
                    <Arg>($padding.y) + "px"</Arg>
                </CustomStyle>
                <CustomStyle>
                    <Arg>"left"</Arg>
                    <Arg>($padding.y) + "px"</Arg>
                </CustomStyle>
                <CustomStyle>
                    <Arg>"bottom"</Arg>
                    <Arg>($padding.y) + "px"</Arg>
                </CustomStyle>
                <CustomStyle>
                    <Arg>"right"</Arg>
                    <Arg>($padding.y) + "px"</Arg>
                </CustomStyle>
            </For>
        </Behaviors>
        <p:Content xmlns:p="http://www.evolus.vn/Namespace/Pencil" xmlns="http://www.w3.org/2000/svg">
            <foreignObject x="0" y="0" width="200" height="150" id="htmlObject">
                <div xmlns="http://www.w3.org/1999/xhtml" style="width: 100%; height: 100%; position: relative;">
                    <textarea type="text" id="textArea" style="width: 100%; height: 100%; -moz-user-focus: ignore; -moz-box-sizing: border-box; -moz-column-gap: 0px; margin: 0px !important;"></textarea>
                    <div style="position: absolute; overflow: hidden;" id="content">
                    </div>
                </div>
            </foreignObject>
        </p:Content>
    </Shape>
    <Shape id="radio" displayName="Radio" icon="Icons/accept.png">
        <Properties>
            <PropertyGroup>
                <Property name="selected" type="Bool" displayName="Selected">false</Property>
                <Property name="disabled" type="Bool" displayName="Disabled">false</Property>
            </PropertyGroup>
            <PropertyGroup name="Text">
                <Property name="text" displayName="Caption" type="PlainText">Radio</Property>
                <Property name="textColor" displayName="Color" type="Color"><E>$$defaultTextColor</E></Property>
                <Property name="textFont" displayName="Font" type="Font"><E>$$defaultTextFont</E></Property>
            </PropertyGroup>
        </Properties>
        <Behaviors>
            <For ref="radio">
                <Attr>
                    <Arg>"disabled"</Arg>
                    <Arg>$disabled.value ? "true" : null</Arg>
                </Attr>
                <Attr>
                    <Arg>"checked"</Arg>
                    <Arg>$selected.value ? "true" : null</Arg>
                </Attr>
            </For>
            <For ref="text">
                <TextContent>$text</TextContent>
                <Fill>$disabled.value ? $textColor.hollowed(0.5) : $textColor</Fill>
                <Font>$textFont</Font>
                <BoxFit>
                    <Arg>new Bound(17, 0, 100, 20)</Arg>
                    <Arg>new Alignment(0, 1)</Arg>
                </BoxFit>
            </For>
        </Behaviors>
        <p:Content xmlns:p="http://www.evolus.vn/Namespace/Pencil" xmlns="http://www.w3.org/2000/svg">
            <foreignObject x="0" y="0" width="21" height="21" id="htmlObject">
                <div xmlns="http://www.w3.org/1999/xhtml" style="width: 100%; height: 100%; position: relative; display: table;">
                    <div style="display: table-cell; vertical-align: middle; text-align: left; line-height: 1px;"><input type="radio" id="radio" style="margin: 0px; padding: 0px;"/></div>
                    <div style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%;"/>
                </div>
            </foreignObject>
            <text id="text" xml:space="preserve"></text>
        </p:Content>
    </Shape>
    <Shape id="checkbox" displayName="Checkbox" icon="Icons/accept.png">
        <Properties>
            <PropertyGroup>
                <Property name="selected" type="Bool" displayName="Selected">false</Property>
                <Property name="disabled" type="Bool" displayName="Disabled">false</Property>
            </PropertyGroup>
            <PropertyGroup name="Text">
                <Property name="text" displayName="Caption" type="PlainText">Check Box</Property>
                <Property name="textColor" displayName="Color" type="Color"><E>$$defaultTextColor</E></Property>
                <Property name="textFont" displayName="Font" type="Font"><E>$$defaultTextFont</E></Property>
            </PropertyGroup>
        </Properties>
        <Behaviors>
            <For ref="check">
                <Attr>
                    <Arg>"disabled"</Arg>
                    <Arg>$disabled.value ? "true" : null</Arg>
                </Attr>
                <Attr>
                    <Arg>"checked"</Arg>
                    <Arg>$selected.value ? "true" : null</Arg>
                </Attr>
            </For>
            <For ref="text">
                <TextContent>$text</TextContent>
                <Fill>$disabled.value ? $textColor.hollowed(0.5) : $textColor</Fill>
                <Font>$textFont</Font>
                <BoxFit>
                    <Arg>new Bound(17, 0, 100, 20)</Arg>
                    <Arg>new Alignment(0, 1)</Arg>
                </BoxFit>
            </For>
        </Behaviors>
        <p:Content xmlns:p="http://www.evolus.vn/Namespace/Pencil" xmlns="http://www.w3.org/2000/svg">
            <foreignObject x="0" y="0" width="21" height="21" id="htmlObject">
                <div xmlns="http://www.w3.org/1999/xhtml" style="width: 100%; height: 100%; position: relative; display: table;">
                    <div style="display: table-cell; vertical-align: middle; text-align: left; line-height: 1px;"><input type="checkbox" id="check" style="margin: 0px; padding: 0px;"/></div>
                    <div style="position: absolute; top: 0px; left: 0px; width: 100%; height: 100%;"/>
                </div>
            </foreignObject>
            <text id="text" xml:space="preserve"></text>
        </p:Content>
    </Shape>
    <Shape id="htmlText" displayName="HTML Texts" icon="Icons/rich-text.png">
        <Properties>
            <PropertyGroup>
                <Property name="width" displayName="Width" type="Handle" p:lockY="true" p:minX="10" p:disabled="!$fixedWidth.value">200,0</Property>
                <Property name="fixedWidth" displayName="Fixed Width" type="Bool">false</Property>
            </PropertyGroup>
            <PropertyGroup name="Text">
                <Property name="textContent" displayName="Text Content" type="RichText"><![CDATA[Sample text]]></Property>
                <Property name="textFont" displayName="Default Font" type="Font"><E>$$defaultTextFont</E></Property>
                <Property name="textColor" displayName="Default Text Color" type="Color"><E>$$defaultTextColor</E></Property>
                <Property name="customStyle" displayName="Additional Style" type="PlainText"><![CDATA[]]></Property>
            </PropertyGroup>
        </Properties>

        <Behaviors>
            <For ref="textDiv">
                <Attr>
                    <Arg>"style"</Arg>
                    <Arg>"display: inline-block; " + $customStyle.value</Arg>
                </Attr>
                <CustomStyle>
                    <Arg>"white-space"</Arg>
                    <Arg>$fixedWidth.value ? null : "nowrap"</Arg>
                </CustomStyle>
                <CustomStyle>
                    <Arg>"width"</Arg>
                    <Arg>$fixedWidth.value ? ($width.x + "px") : null</Arg>
                </CustomStyle>
                <CustomStyle>
                    <Arg>"text-decoration"</Arg>
                    <Arg>$textFont.decor</Arg>
                </CustomStyle>
            </For>
            <For ref="htmlObject">
                <TextContent>
                    <Arg>$textContent</Arg>
                    <Arg>false</Arg>
                    <Arg>true</Arg>
                </TextContent>
                <Color>$textColor</Color>
                <Font>$textFont</Font>
                <Box>var size = F.elementSize("textDiv"); new Dimension($fixedWidth.value ? $width.x : size.w, size.h + 5); /* depends $textFont $textContent $customStyle */</Box>
            </For>
        </Behaviors>
        <Actions>
            <Action id="generateLoremShortRichTextBox" displayName="Generate Short Random Texts">
                <Impl>
                        <![CDATA[
                            this.setProperty("textContent", RichText.fromLoremIpsum(10));
                        ]]>
                </Impl>
            </Action>
            <Action id="generateLoremLongRichTextBox" displayName="Generate Long Random Texts">
                <Impl>
                        <![CDATA[
                            this.setProperty("textContent", RichText.fromLoremIpsum(45));
                        ]]>
                </Impl>
            </Action>
            <Action id="generateLoremExtraLongRichTextBox" displayName="Generate Longer Random Texts">
                <Impl>
                        <![CDATA[
                            this.setProperty("textContent", RichText.fromLoremIpsum(150));
                        ]]>
                </Impl>
            </Action>
        </Actions>

        <p:Content xmlns:p="http://www.evolus.vn/Namespace/Pencil" xmlns="http://www.w3.org/2000/svg">

            <foreignObject x="0" y="0" width="200" height="150" id="htmlObject">
                <div xmlns="http://www.w3.org/1999/xhtml" id="textDiv">
                    Rich <strong>text</strong> pane contains <a href="#">hyper text</a>
                </div>
            </foreignObject>
        </p:Content>
    </Shape>
    <Shape id="htmlLink" displayName="Hyperlink" icon="Icons/rich-text.png">
        <Properties>
            <PropertyGroup name="Text">
                <Property name="textContent" displayName="Text Content" type="PlainText"
                p:editInfo="var size = F.elementSize('textDiv'); ({targetName: 'htmlObject', bound: new Bound(0, 0, Math.max(size.w, 80) , Math.max(size.h, 10)), font: $textFont, align: new Alignment(0, 1)})"><![CDATA[Hyperlink]]></Property>
               <Property name="textFont" displayName="Default Font" type="Font"><E>$$defaultTextFont</E></Property>
                <Property name="textColor" displayName="Default Text Color" type="Color"><E>$$defaultLinkColor</E></Property>
                 <Property name="customStyle" displayName="Additional Style" type="PlainText"><![CDATA[]]></Property>
            </PropertyGroup>
        </Properties>

        <Behaviors>
            <For ref="textDiv">
                <Attr>
                    <Arg>"style"</Arg>
                    <Arg>"white-space: nowrap; text-decoration: underline; display: inline-block !important; " + $customStyle.value</Arg>
                </Attr>
            </For>
            <For ref="htmlObject">
                <TextContent>
                    <Arg>new RichText($textContent)</Arg>
                    <Arg>false</Arg>
                    <Arg>true</Arg>
                </TextContent>
                <Color>$textColor</Color>
                <Font>$textFont</Font>
                <Box>var size = F.elementSize("textDiv"); new Dimension(size.w, size.h + 5); /* depends $textFont $textContent $customStyle */</Box>
            </For>
        </Behaviors>
        <Actions>
            <Action id="generateLoremShortRichTextBox" displayName="Generate Random Texts">
                <Impl>
                        <![CDATA[
                            this.setProperty("textContent", RichText.fromLoremIpsum(10));
                        ]]>
                </Impl>
            </Action>
        </Actions>

        <p:Content xmlns:p="http://www.evolus.vn/Namespace/Pencil" xmlns="http://www.w3.org/2000/svg">

            <foreignObject x="0" y="0" width="200" height="150" id="htmlObject">
                <div xmlns="http://www.w3.org/1999/xhtml" id="textDiv">
                </div>
            </foreignObject>
        </p:Content>
    </Shape>
    <Shape id="htmlHR" displayName="HR" icon="Icons/rich-text.png">
        <Properties>
            <PropertyGroup>
                <Property name="width" displayName="Width" type="Handle" p:lockY="true" p:minX="10" p:disabled="!$fixedWidth.value">200,0</Property>
                <Property name="hairLine" displayName="Hair Line" type="Bool">false</Property>
            </PropertyGroup>
        </Properties>

        <Behaviors>
            <For ref="textDiv">
                <CustomStyle>
                    <Arg>"width"</Arg>
                    <Arg>$width.x + "px"</Arg>
                </CustomStyle>
            </For>
            <For ref="htmlObject">
                <Box>var size = F.elementSize("textDiv"); new Dimension($width.x, size.h); /* depends $hairLine */</Box>
            </For>
        </Behaviors>
        <Actions>
            <Action id="generateLoremShortRichTextBox" displayName="Generate Short Random Texts">
                <Impl>
                        <![CDATA[
                            this.setProperty("textContent", RichText.fromLoremIpsum(10));
                        ]]>
                </Impl>
            </Action>
            <Action id="generateLoremLongRichTextBox" displayName="Generate Long Random Texts">
                <Impl>
                        <![CDATA[
                            this.setProperty("textContent", RichText.fromLoremIpsum(45));
                        ]]>
                </Impl>
            </Action>
            <Action id="generateLoremExtraLongRichTextBox" displayName="Generate Longer Random Texts">
                <Impl>
                        <![CDATA[
                            this.setProperty("textContent", RichText.fromLoremIpsum(150));
                        ]]>
                </Impl>
            </Action>
        </Actions>

        <p:Content xmlns:p="http://www.evolus.vn/Namespace/Pencil" xmlns="http://www.w3.org/2000/svg">

            <foreignObject x="0" y="0" width="200" height="150" id="htmlObject">
                <div xmlns="http://www.w3.org/1999/xhtml" id="textDiv" style="display: inline-block;">
                    <hr/>
                </div>
            </foreignObject>
        </p:Content>
    </Shape>
    <Shape id="breadCrumb" displayName="Bread Crumb" icon="Icons/rich-text.png">
        <Properties>
            <PropertyGroup name="Text">
                <Property name="textContent" displayName="Text Content" type="PlainText"
                        p:editInfo="var size = F.elementSize('textDiv'); ({targetName: 'htmlObject', bound: new Bound(0, 0, Math.max(size.w, 80) , Math.max(size.h, 10)), font: $textFont, align: new Alignment(0, 1)})"><![CDATA[Home > Products > Pencil]]></Property>
                <Property name="textColor" displayName="Default Text Color" type="Color"><E>$$defaultLinkColor</E></Property>
                <Property name="textFont" displayName="Default Font" type="Font"><E>$$defaultTextFont</E></Property>
                <Property name="customStyle" displayName="Additional Style" type="PlainText"><![CDATA[]]></Property>
            </PropertyGroup>
            <PropertyGroup name="Home Styles">
                <Property name="homeColor" displayName="Home Color" type="Color"><E>$$defaultLinkColor</E></Property>
                <Property name="homeCustomStyle" displayName="Additional Style" type="PlainText"><![CDATA[]]></Property>
            </PropertyGroup>
            <PropertyGroup name="Separator Styles">
                <Property name="sepColor" displayName="Home Color" type="Color"><E>$$defaultTextColor.hollowed(0.5)</E></Property>
                <Property name="spaceSize" displayName="Spacing" type="Enum" p:enumValues="['0|None', '0.5|Half a char', '1|One char', '2|Two chars']">0.5</Property>
                <Property name="sepCustomStyle" displayName="Additional Style" type="PlainText"><![CDATA[]]></Property>
            </PropertyGroup>
            <PropertyGroup name="End Styles">
                <Property name="endColor" displayName="End Color" type="Color"><E>$$defaultTextColor</E></Property>
                <Property name="endCustomStyle" displayName="Additional Style" type="PlainText"><![CDATA[]]></Property>
            </PropertyGroup>
        </Properties>

        <Behaviors>
            <For ref="textDiv">
                <Attr>
                    <Arg>"style"</Arg>
                    <Arg>"display: inline-block; white-space: nowrap; " + $customStyle.value</Arg>
                </Attr>
                <Color>$textColor</Color>
                <Font>$textFont</Font>
                <CustomStyle>
                    <Arg>"text-decoration"</Arg>
                    <Arg>"none"</Arg>
                </CustomStyle>
            </For>
            <For ref="htmlObject">
                <TextContent>
                    <Arg>
                        <![CDATA[
                            var items = $textContent.value.split(/[ \t]*>[ \t]*/);
                            for (var i in items) {
                                items[i] = "<span style=\""
                                        + (i == 0 ? ("color: " + $homeColor.toRGBAString() + "; " + $homeCustomStyle) : "")
                                        + (i == items.length - 1 ? ("color: " + $endColor.toRGBAString() + "; " + $endCustomStyle) : "text-decoration: " + $textFont.decor + ";")
                                        + ";\">"
                                        + Dom.htmlEncode(items[i])
                                        + "</span>";
                            }
                            var html = items.join("<span style=\"color: " + $sepColor.toRGBAString() + "; margin: 0px " + $spaceSize.value + "ex; " + $sepCustomStyle + "\">&gt;</span>");

                            new RichText(html);
                        ]]>
                    </Arg>
                    <Arg>false</Arg>
                    <Arg>true</Arg>
                </TextContent>
                <Box>var size = F.elementSize("textDiv"); new Dimension(size.w, size.h); /* depends $textFont $customStyle $homeCustomStyle $endCustomStyle $sepCustomStyle $textContent $spaceSize */</Box>
            </For>
        </Behaviors>
        <p:Content xmlns:p="http://www.evolus.vn/Namespace/Pencil" xmlns="http://www.w3.org/2000/svg">

            <foreignObject x="0" y="0" width="200" height="20" id="htmlObject">
                <div xmlns="http://www.w3.org/1999/xhtml" id="textDiv">
                </div>
            </foreignObject>
        </p:Content>
    </Shape>
    <Shape id="table" displayName="Table" icon="Icons/rich-text.png">
        <Properties>
            <PropertyGroup name="Sizing">
                <Property name="width" displayName="Width" type="Handle" p:lockY="true" p:minX="10" p:disabled="!$fixedWidth.value">200,0</Property>
                <Property name="fixedWidth" displayName="Fixed Width" type="Bool">false</Property>
                <Property name="useHtmlContent" displayName="Use HTML Content" type="Bool">false</Property>
                <Property name="padding" displayName="Cell Padding" type="Handle" p:lockX="true" p:minY="0">0,4</Property>
            </PropertyGroup>
            <PropertyGroup name="Text">
                <Property name="textContent" displayName="Text Content" type="PlainText"
                        p:editInfo="var size = F.elementSize('textDiv'); ({targetName: 'htmlObject', bound: new Bound(0, 0, Math.max(size.w, 80) , Math.max(size.h, 10)), font: $textFont, align: new Alignment(0, 1), multi: true})"><![CDATA[Column 1 | Column 2
Cell Content 1 | Cell Content 2]]></Property>
                <Property name="textFont" displayName="Default Font" type="Font"><E>$$defaultTextFont</E></Property>
                <Property name="textAlign" displayName="Text Alignment" type="Alignment">0,1</Property>
                <Property name="customStyle" displayName="Additional Style" type="PlainText"><![CDATA[]]></Property>
            </PropertyGroup>
            <PropertyGroup name="Content Color">
                <Property name="textColor" displayName="Default Text Color" type="Color"><E>$$defaultTextFont</E></Property>
                <Property name="fillColor" displayName="Table Background" type="Color">#00000000</Property>
            </PropertyGroup>
            <PropertyGroup name="Header Color">
                <Property name="headerTextColor" displayName="Default Text Color" type="Color"><E>$$defaultHeaderTextColor</E></Property>
                <Property name="headerBackground" displayName="Header Background" type="Color"><E>$$defaultHeaderBGColor</E></Property>
            </PropertyGroup>
            <PropertyGroup name="Border">
                <Property name="strokeColor" displayName="Border Color" type="Color"><E>$$defaultTableBorderColor</E></Property>
                <Property name="strokeStyle" displayName="Border Style" type="StrokeStyle"><E>$$defaultTableBorderStyle</E></Property>
            </PropertyGroup>
        </Properties>

        <Behaviors>
            <For ref="textDiv">
                <Attr>
                    <Arg>"style"</Arg>
                    <Arg>"padding: 1px; display: inline-block; " + $customStyle.value</Arg>
                </Attr>
                <CustomStyle>
                    <Arg>"white-space"</Arg>
                    <Arg>$fixedWidth.value ? null : "nowrap"</Arg>
                </CustomStyle>
                <CustomStyle>
                    <Arg>"width"</Arg>
                    <Arg>$fixedWidth.value ? (($width.x - 2) + "px") : null</Arg>
                </CustomStyle>
                <Color>$textColor</Color>
                <Font>$textFont</Font>
                <CustomStyle>
                    <Arg>"text-decoration"</Arg>
                    <Arg>"none"</Arg>
                </CustomStyle>
            </For>
            <For ref="htmlObject">
                <TextContent>
                    <Arg>
                    <![CDATA[
                        var gen = function (isHeader, content) {
                            var style = "border: solid " + $strokeStyle.w + "px " + $strokeColor.toRGBAString() + ";"
                            style += "padding: " + $padding.y + "px; ";
                            if (isHeader) {
                                style += "background-color: " + $headerBackground.toRGBAString() + ";";
                                style += "color: " + $headerTextColor.toRGBAString() + ";";
                            }

                            style += "text-align: " + ["left", "center", "right"][$textAlign.h] + "; ";
                            style += "vertical-align: " + ["top", "middle", "bottom"][$textAlign.v] + "; ";

                            var index = content.indexOf("@@");
                            if (index >= 0) {
                                style += content.substring(index + 2) + ";";
                                content = content.substring(0, index);
                            }
                            content = content.replace(/\\n/gi, "\n");

                            var tag = isHeader ? "th" : "td";
                            return "<" + tag + " style=\"" + style + "\">" + ($useHtmlContent.value ? content : Dom.htmlEncode(content)) + "</" + tag + ">";
                        };
                        var html = "";
                        try {
                            var lines = $textContent.value.split(/[\r\n]+/);
                            var tableStyle = $customStyle.value;
                            if ($customStyle.value.indexOf("border-collapse") < 0) {
                                tableStyle += "border-collapse: collapse; ";
                            }
                            if ($customStyle.value.indexOf("background") < 0) {
                                tableStyle += "background-color: " + $fillColor.toRGBAString() + "; ";
                            }
                            if ($fixedWidth.value) {
                                tableStyle += "width: " + ($width.x - 2) + "px; ";
                            }
                            html = "<table style=\"" + tableStyle + "\"><thead>";

                            for (var i in lines) {
                                var cells = lines[i].split(/\|/);
                                html += "<tr>";

                                for (var j in cells) {
                                    html += gen(i == 0, cells[j]);
                                }

                                html += "</tr>";

                                if (i == 1) {
                                    html += "</thead><tbody>";
                                }
                            }

                            html += lines.length <= 1 ? "</thead>" : "</tbody>";
                            html += "</table>";
                        } catch (e) {
                            html = "Error parsing texts: " + e;
                        }

                        debug("TABLE: " + html);

                        new RichText(Dom.toXhtml(html));
                    ]]>
                    </Arg>
                    <Arg>false</Arg>
                    <Arg>true</Arg>
                </TextContent>
                <Box>var size = F.elementSize("textDiv"); new Dimension($fixedWidth.value ? $width.x : size.w, size.h); /* depends $textFont $customStyle $textContent */</Box>
            </For>
        </Behaviors>
        <p:Content xmlns:p="http://www.evolus.vn/Namespace/Pencil" xmlns="http://www.w3.org/2000/svg">

            <foreignObject x="0" y="0" width="200" height="20" id="htmlObject">
                <div xmlns="http://www.w3.org/1999/xhtml" id="textDiv" style="padding: 5px;">
                </div>
            </foreignObject>
        </p:Content>
    </Shape>
</Shapes>
